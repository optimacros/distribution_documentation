# Экспертиза по отстуствию интернета внутри контейнера.

Если из контейнера нет интернета, то возможно проблема с lxc-net в области проставления iptables правил
Такая проблема была найдена на Ubuntu 22.04.1 LTS совместно с lxc 5.0.1

Для проверки можно посмотреть вывод команды `iptables-save` и если там нет правил для моста lxc-net (lxcbe0) значит 
проблема в отсутствии правил
Если команда `command -v nft` показывает не пустой вывод, значит есть конфликт в lxc-net логике, скрипт думает что в 
системе вместо `iptables` стоит `nftables`, но это не так.
Для исправления необходимо в настройках lxc-net (/etc/default/lxc-net) явно задать выключение для nftables, достаточно 
там указать доп. параметр `LXC_USE_NFT="false"` и сделать рестарт сервиса `systemctl restart lxc-net`, после этого вывод
команды `iptables-save` должен пополнится нужными правилами и выход в внешний мир для контейнера будет открыт.

[Вернуться к экспертизе <](expertise.md)

[Вернуться к оглавлению <<](index.md)