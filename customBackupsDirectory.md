# Как настроить директорию для хранения бекапов моделей: 

## Инструкция (только для версий 1.0.83+):
Бывает складывается такая ситуация во время проведения обновления у нас в разделе (для примера `/om`) с установленным 
Optimacros не достаточно свободного места (ПЗУ) для полного бекапирования директории с воркспейсом, но при этом есть ещё
 один раздел в системе на котором много свободного места (допустим он называется /opt2). В таком случае мы имеем 
 возможность перенести хранение бекапов в другой  раздел, что сильно сократит размер директории с воркспейсом. Для этого
  нам нужно создать директорию в необходимом нам  разделе с произвольным именем, это можно сделать при помощи команды:
 
`mkdir /opt2/customBackupDirectory` - где `opt2` это раздел на котором есть свободное место, а `customBackupDirectory` 
имя директории, которое мы выбрали для хранения бекапов.

Далее нам необходимо остановить работу воркспейса, мы можем это сделать при помощи команды:

`/om/workspace-installer/current/install workspace --path /om/workspace1/manifest.json shutdown`

После остановки работы воркспейса, мы переходим в директорию с самим воркспейсом с помощью команд:

`cd /om`

![](./pictures/cdOm.jpg)

`cd workspace1`

![](./pictures/cdWorkspace1.jpg)

Далее переходим в директорию data:

`cd data`

![](./pictures/cdData.jpg)

Здесь мы можем увидеть директорию modelBackups:

`ls -la`

![](./pictures/lsLaData.jpg)

Далее переносим директорию `modelBackups` сразу же выдавая новое имя `workspace1` (это делается на случай если вдруг в 
разделе /om будет не 1 воркспейс, а несколько workspace2 и workspace3 и мы потенциально могли бы их бекапы тоже хранить 
в этой же директории /opt2/customBackupDirectory с соответствующими именами) в наш раздел в нашу новую директорию 
созданную для этого:

`mv modelBackups /opt2/customBackupDirectory/workspace1/modelBackups`

Далее нам следует сконфигурировать manifest файл воркспейса, добавив в блок container новое свойство, для хранения 
бекапов в новом месте. Файл манифест находится в директории workspace1 откроем его для редактирования и добавим блок:

`nano /путь/к/директорииOm/workspace1/manifest.json`

![](./pictures/editMasnifest.jpg)

Вот блок в текстовом виде:

```
"syncedFolders": {
  "modelBackups": {
     "externalPath": "/opt2/customBackupDirectory/workspace1/modelBackups"
   }
}
```

После этого поднимаем воркспейс с помощью команды:

`/om/workspace-installer/current/install workspace --path /om/workspace1/manifest.json up`

Для особо пытливых дополню что после поднятия воркспейса в директории `/om/workspace1/data/` снова создастся пустая 
директория с именем `modelBackups` но она будет пустая (это нормальное поведение), а новые бекапы моделей уже будут 
сохраняться в нашей новой директории в новом разделе.

На этом всё.

[Вернуться к содержанию <](contents.md)

[Вернуться к оглавлению <<](index.md)
